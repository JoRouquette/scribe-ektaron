<mat-tree
  class="tree"
  [dataSource]="filteredRoot()?.children ?? []"
  [childrenAccessor]="childrenOf"
  [trackBy]="trackByPath"
>
  <!-- Dossier (parent) -->
  <mat-nested-tree-node
    *matTreeNodeDef="let n; when: isFolder"
    #node="matNestedTreeNode"
    class="node folder"
    [attr.aria-expanded]="node.isExpanded"
  >
    <button
      class="node-header"
      type="button"
      matTreeNodeToggle
      (click)="n.toggle()"
      aria-label="Ouvrir/fermer le dossier"
    >
      <mat-icon class="ico folder-ico" aria-hidden="true">folder</mat-icon>
      <span class="label">{{ n.label || n.name || 'root' }}</span>
      <mat-icon class="chev" aria-hidden="true">expand_more</mat-icon>
    </button>

    <div class="children" [class.collapsed]="!node.isExpanded">
      <ng-container matTreeNodeOutlet></ng-container>
    </div>
  </mat-nested-tree-node>

  <mat-tree-node *matTreeNodeDef="let n; when: isFile" class="node file">
    <a class="file-link" [routerLink]="`/${n.path}`" aria-label="Ouvrir le fichier">
      <mat-icon class="ico file-ico" aria-hidden="true">description</mat-icon>
      <span class="label">{{ n.label }}</span>
    </a>
  </mat-tree-node>
</mat-tree>
